<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Rendering HTML with Drupal: Past, Present and Future</title>

    <meta name="author" content="Steve Persch">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="palantir/palantir.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->


    <style type="text/css">

    ul.inline {
      margin: 0;
      padding: 0;
      list-style-type: none;
      text-align: center;
    }

    ul.inline li {
      display: inline;
    }

    div.horiz-columns {
      display: flex;
      align-items: flex-start;
      justify-content: space-around;
      flex-wrap: nowrap;
    }
    div.horiz-columns.two-col > div,
    div.horiz-columns.two-col > ul {
      width: 50%;
    }

    ul.horiz-list {
      display: flex;
      align-items: flex-start;
      justify-content: space-around;
      flex-wrap: nowrap;
      list-style-type: none;
    }
    ul.horiz-list > li > h3 {
      text-align: center;
    }

    .horiz-columns.centered {
      align-items: center;
    }

    .reveal ul > ul {
      margin-top: 2em;
    }

    img.screencap {
      border-radius: 10px;
      width: 100%;
      height: 100%;
    }

    img.architecture-diagram {
      border-radius: 10px;
      width: 100%;
      height: 100%;
    }

    .reveal .highlight {
      color: #9fc855;
    }

    .reveal h2 + h3 {
      color: #9fc855;
    }

    table.decision-chart {
      width: 100%;
      border-collapse: collapse;
    }

    table.decision-chart,
    table.decision-chart td,
    table.decision-chart th {
      border: 1px solid #9fc855;
      padding-left: 1em;
      text-align: left;
    }

    table.decision-chart th {
      color: #9fc855;
    }

    table.decision-chart td {
      font-size: 0.6em;
    }

    img.casestudy {
      /*width: 50%;*/
      /*max-height: 400px;*/
      max-width: 400px;
    }


    </style>

  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          <section>
            <h1>Rendering HTML with Drupal: Past, Present and Future</h1>
            <p>
              <small>Presented by <a href="http://www.stevepersch.com/">Steve Persch</a> (<a href="http://twitter.com/stevector">@stevector</a>)</small>
            </p>
          </section>
          <section>
            <h2>Steve Persch</h2>
            <p>Senior Engineer and Team Lead at <a href="http://palantir.net/">Palantir.net</a></p>
            <p><a href="http://twitter.com/stevector">@stevector</a> on Twitter</p>
          </section>

          <section>
            <h2>“The future is already here – it's just not <br>evenly distributed.”</h2>
            <p><a href="http://en.wikipedia.org/wiki/William_Gibson">William Gibson</a></p>
            <aside class="notes"><p>The presentation is given from a Drupal/Palantir/Steve Persch perspective. Many of the techniques I'll call "future" are already being used successfully inside and outside of Drupal. Many of the techiques I'll call "past" are still here now and will remain for years to come.</p> 
            </aside>
          </section>


        </section>


        <section>


          <section>
            <h1>What are we doing?</h1>
            <aside class="notes"><p>I'm going to ask this question a couple of time during the presentation. How we think about the things we're doing, what we THINK we're actually doing, greatly affects what we are, in fact doing.</p> 
            </aside>
          </section>

          <section>
            <h2>"Web programming is the science of coming up with increasingly complicated ways of concatenating strings."</h2>
            <p><a href="https://twitter.com/thegdb/status/148293778019581952">Greg Brockman</a></p>
            <aside class="notes"><p>By this measure Drupalers are really good scientists.</p> 
            </aside>
          </section>


          <section>
            <h1>The once and future theme()</h1>
            <aside class="notes"><p>Let's start with a simple example with our main concatentor. The theme()</p> 
            </aside>
          </section>



        <section>
            <h2>theme_item_list()</h2>
            <table>

               <tr>
                 <td>
                  <b>PHP</b>
                </td>
                <td>
                  <b>HTML</b>
                </td>
                <td>
                  <b>Final</b>
                </td>
              </tr>
              <tr>
                <td>
                        <pre><code class="php" data-trim>
$vars['title'] = 'Grocery List';
$vars['items'] = array(
  'Fruit',
  'Bread',
  'Cheese',
  'Meat',
);
print theme('item_list', $vars);
</code></pre>
</td>

<td>
<pre><code class="html" data-trim>

<div class="item-list">
  <h3>Grocery List</h3>
  <ul>
    <li class="first">Fruit</li>
    <li>Bread</li>
    <li>Cheese</li>
    <li class="last">Meat</li>
  </ul>
</div>


</code></pre>
</td>

<td>


<div class="item-list">
  <h3>Grocery List</h3>
  <ul>
    <li class="first">Fruit</li>
    <li>Bread</li>
    <li>Cheese</li>
    <li class="last">Meat</li>
  </ul>
</div>



</td>

</tr></table>
            <aside class="notes">
            <p>Theme item list has been in Drupal for 13 years. 562df8fe43f8794317c974dae463f54 When it was added it didn't even use ul/li, just line breaks.

              The function theme_item
            </p> 
            </aside>
          </section>


          <section>
            <h2>The basic idea</h2>
<ul>
  <li class="fragment">
    Tell the theme system what you want to print <pre><code class="php" data-trim>theme('item_list')</code></pre>
  </li>
  <li class="fragment">
    Also pass in the content variables <pre><code class="php" data-trim>theme('item_list', $variables)</code></pre>
  </li>
  <li class="fragment">
    The theme system will then call: <pre><code class="php" data-trim>theme_item_list($variables)</code></pre>
  </li>
  <li class="fragment">
    Override that function if you want <pre><code class="php" data-trim>mysitetheme_item_list($variables)</code></pre>
  </li>

</ul>

            <aside class="notes">
            <p>There's our not-too-complicated idea on how Drupal renders stuff.
              <br>Separation of data and template.
            </p> 
            </aside>

</section>



          <section>
            <h2>It gets complicated quickly</h2>
            <pre><code class="php" data-trim>
$node = node_load(123);
theme('node', $node);</code></pre>
            <aside class="notes"><p></p> 
            </aside>

          </section>
 

          <section>
            <h2>Drupal likes to expose data layers as CSS classes</h2>
            <img src="assets/drupal-core-markup.png" alt="Drupal Core Markup" />
            <aside class="notes">
              When all you tell Drupal is "print this node for me" then that is all it will do.<br>
              Drupal will do it diligently.<br>
              Drupal will tell us as much as it can through CSS classes.<br>
              It even has a CSS class to tell us that it didn't print a label on field.
            </aside>
          </section>

          <section>
            <h2>The basic idea</h2>
            <ul>
              <li class="fragment">
                Tell the theme system what you want to print <pre><code class="php" data-trim>theme('node')</code></pre>
              </li>
              <li class="fragment">
                Give it the node to be rendered <pre><code class="php" data-trim>theme('node', array('node' => $node))</code></pre>
              </li>
              <li class="fragment">
                The preprocess layer looks at the raw node and gets printable fields variables
              </li>
              <li class="fragment">
                Those variables get printed in the template <code>node.tpl.php</code>
              </li>
              <li class="fragment">
                Override with template suggestions like <code>node--blogpost.tpl.php</code>
              </li>
            </ul>

            <aside class="notes">
              <p>A ton can happen in the preprocess layer. Load fields, comments, EVA. hook_fields_extra_fields().
              </p> 
            </aside>

          </section>

        </section>



<!--- @todo theme_item_list / theme_node dichtomy  look at hook_theme-->

        <section id="past">


          <section>
            <h1>The PAST</h1>
            <h2>"Sustainable Theming"</h2>
          </section>

          <section>
          <h2>Sustainable Theming</h2>
          <blockquote>An extensible design, a design tool kit that <strong>continues to evolve</strong>, without the help of a HTML/CSS developer is the ultimate goal; a design or theme that <strong>stays intact</strong> as you add new content and new layouts to your site.</blockquote>
          <p><small><a href="http://www.palantir.net/blog/sustainable-markup-how-be-themer-drupal">Colleen Carroll in 2008</a></small></p>



       <aside class="notes">     <h2>The Goals of the Past are a lot like the goals of the Present (and the Future)</h2>
            <h3>We want the design and the content to work together and reduce the likelihood of something breaking.</h3>
            </aside>

          </section>
          <!-- @todo Callback this quote later -->



          <section>
            <h2>The GIVENS of the PAST</h2>
          </section>

          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>Your designs are JPGs</h2>
            <h3>And doing anything in Drupal gives you a ton of HTML</h3>
            <aside class="notes"><p>In the modern/future era of static prototyping your "designs" might make a ton of CSS class name and markup for you and your CMS might not make any suggestion about HTML and class names. In the PAST that was totally reversed.</p> 
            </aside>
          </section>

          <section>
            <h2>GIVEN: Core names CSS classes by internal data structures</h2>
            <img src="assets/drupal-core-markup.png" alt="Drupal Core Markup" />
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>No preprocess on theme functions</h2>
            <h3>So CSS classes are harder to change</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>

          <section>
            <h1>GIVEN <small>(in D5 era)</small></h1>
            <h2>Your only Build Modes (View Modes) are “full” and “teaser”</h2>
            <h3>Use Views UI and CSS classes on <code>body</code> to change appearance</h3>
            <aside class="notes">
              <p>In the "PRESENT" section of the presentation I'll talk more about the tools we have now for modifying markup in a Design Component mindset. That tool box was rather empty in the D5 era.
            </p> 
            </aside>
          </section>

          <section>
<blockquote>Drupal is not a build a template first system, its a install a module and theme it system.</blockquote>
            <p><small><a href="http://www.palantir.net/comment/47#comment-47">Colleen Carroll in 2009</a></small></p>
          </section>

          <section>
<blockquote>Themers should <strong>do as much as possible using CSS</strong> and <strong>avoid touching template.php or the .tpl.php files</strong> unless it's absolutely necessary. The advantage of this approach is that it makes the theme more <strong>portable</strong>, more <strong>upgradable</strong>, and ultimately more <strong>maintainable</strong></blockquote>
            <p><small><a href="http://www.palantir.net/comment/183#comment-183">George DeMet in 2008</a></small></p>
          </section>

          <section>
<blockquote>I think that people need to <strong>stop trying to fiddle with the HTML layer</strong> in Drupal. Its not worth it, its not that interesting, and <strong>everything can be done with CSS anyway</strong>, and should be.</blockquote>
            <p><small><a href="http://www.palantir.net/comment/47#comment-47">Colleen Carroll in 2009</a></small></p>
          </section>



          <section>
            <h3>What does this CSS look like</h3>
<pre><code class="code" data-trim>
.field-field-headline {
  font-weight:bold;
}
</code></pre>

          </section>



          <section>
            <h3>Complete Coupling to Views and Field Module</h3>
            <pre><code class="css" data-trim>
.views-field-field-headline-value {
  font:normal 16px Georgia, "Times New Roman", "Bitstream Vera Serif", serif;
}</code></pre>

          </section>




          <section>
            <h1>IN A WORLD<br> <small>where CSS is your API to the browser</small></h1>
           <ul>
              <li class="fragment">The more CSS selectors the better</li>
              <li class="fragment">The more DIVs the better</li>
              <li class="fragment">The longer the class names the better</li>
              <li class="fragment">Long, multi-element selectors are very tempting</li>
            </ul>
          </section>


          <section>
            <h2>Drupal Core <br>
              <small>exposes each </small/><br>internal data model layer<br> <small>as a </small>
<br>
              wrapping HTML element.</h2>
          </section>


          <section>
            <h1>What are we doing?</h1>
          </section>


          <section>
            <h1>
              <small>We are making <br>Drupal elements </small/><br>Look Like<br> <small>the design</small>
            </h1>
          </section>

          <section>
            <h2>"To seem to be,
              <br>rather than to be"</h2>
            <img src="assets/colbert.png" alt="Screenshot of Stephen Colbert sitting at his fireplace." />
            <p><small><a href="http://www.hulu.com/watch/709161#i0,p2,d0">Stephen Colbert</a></small></p>
          </section>

<!--


          <section>
            <h2>When there aren't PSDs</h2>
<blockquote>We then let Drupal do the work, and let the designers theme the output, NOT vice versa. How does this help? If you have the ability to do this interactive prototype before designs are even created, you can then use the wireframed prototype in Drupal as a stepping stone for the design.</blockquote>
            <p><small><a href="http://www.palantir.net/blog/sustainable-markup-how-be-themer-drupal">Colleen Carroll in 2008</a></small></p>
          </section>


-->








        </section>


        <section id="present1">
          
          <section>
            <h1>The (Past-ish) PRESENT</h1>
            <h2>Chasing Easy /<br> Losing Simple</h2>
          </section>


          <section>
          <h2>"Sustainable Building Blocks"</h2>
            <blockquote>now instead of overriding the theme function for a field you <strong>write a new formatter</strong> that does just what you want. ... Your theme override trick has now become a <strong>well-encapsulated</strong>, <strong>portable</strong>, <strong>flexible</strong> building block that you can reuse anywhere on your site, or on your next site, or your next 12 sites.</blockquote>
            <p><small><a href="http://www.palantir.net/blog/building-sustainable-building-blocks">Larry Garfield in 2009</a></small></p>
                        <aside class="notes"><p>Just as "Sustainable Theming" is getting traction, we see something different. On the one hand we have "don't bother altering the HTML", 
                        on the other "we have new, easy, resuable ways to alter the HTML"</p> 
            </aside>
          </section>


          <section>
          <h2>Write more plugins</h2>
            <blockquote>And speaking of views, one-off overrides are so old school. Instead of building everything off of list views and custom theming, <strong>build a new style plugin</strong>. Or a display plugin. Or an argument handler.</blockquote>
            <p><small><a href="http://www.palantir.net/blog/building-sustainable-building-blocks">Larry Garfield in 2009</a></small></p>
          </section>


         <section>
            <h2>Views Cycle Module</h2>

<pre><code class="php" data-trim>

< ?php echo $js_settings; ?>
<div class="views-cycle item-list">
  < ?php if (!empty($title)) : ?>
    <h3><?php print $title; ?></h3>
  < ?php endif; ?>
  << ?php print $options['type']; ?> class="views-cycle-container" id="< ?php echo $cycle_id; ?>">
    < ?php foreach ($rows as $row): ?>
      <li><?php print $row; ?></li>
    < ?php endforeach; ?>
  < / < ?php print $options['type']; ?>>
</div>

</code></pre>
          </section>




          <section>
          <h2>Why?</h2>
            <blockquote>True, it's <strong>another API to learn</strong> (as if Drupal doesn't have enough already), but the result is a reusable building block that does just what you need in a <strong>clean</strong>, <strong>extensible</strong> fashion that can be mixed and matched with other <strong>reusable</strong> building blocks, both yours and someone else's.</blockquote>
            <p><small><a href="http://www.palantir.net/blog/building-sustainable-building-blocks">Larry Garfield in 2009</a></small></p>
          </section>

          <section>
          <h1>What are we doing?</h1>
          </section>

          <section>
            <h2>Are we writing CSS <br>to make a View <br><em>Look Like</em><br> a slideshow?</h2>
          </section>

         <section>
            <h2>Are we writing <br>a Display Plugin<br> to make a View <br><em>BE</em><br> a slideshow?</h2>
          </section>



          <section>
            <h2> D7's complexity clouds that question</h2>
            <img src="assets/theme-system.png" alt="The flow chart of Drupal's terrible theme system flow" />
            <p><small><a href="http://john.albin.net/drupal/arrays-of-doom">Diagram from John Albin Wilkins</a></small></p>
          </section>

          <section>
            <h2>Modifying markup with tools from Core</h2>
            <ul>
              <li class="fragment">Preprocess in modules and themes</li>
              <li class="fragment">Process in modules and themes</li>
              <li class="fragment">theme hook suggestions for theme functions and templates</li>
              <li class="fragment">Field Formatters</li>
              <li class="fragment">hook_field_extra_fields</li>
              <li class="fragment">Writing new theme functions</li>
              <li class="fragment">Render arrays</li>
              <li class="fragment">hook_node_load</li>
            </ul>
          </section>

          <section>
            <h2>And then there's Contrib</h2>
            <ul>
              <li class="fragment">Panels, Page Manager, Panels Everywhere, Mini Panels, Panelizer</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>

          <section>
            <h2>Rendering in Drupal can feel like ...</h2>
            <img src="assets/plinko.gif" alt="Plinko!" />
          </section>

          <section>
            <h2>Or Maybe ...</h2>
            <img src="assets/mouse-trap.jpg" alt="The board game Mouse Trap" />
          </section>


          <section>
            <h1>WHAT ARE WE DOING?</h1>
          </section>

          <section>
            <h2>Whatever feels easier<br>(Not simpler)</h2>
          </section>






         <section>
<blockquote>
Why do I call it the "sustainable" method?  Well, because it involves <strong>patience, long-term planning</strong> and it truly involves getting your hands dirty with Drupal, <strong>getting to know its inner structure</strong>, even when it changes and annoys the crap out of you.  I'd rather work with it than against it.
</blockquote>
            <p><small><a href="http://www.palantir.net/blog/drupal-theming-getting-your-hands-dirty-and-building-house-0">Colleen Carroll in 2009</a></small></p>
          </section>


          <section>
            <h3>The "Sustainable Theming" mentality relies on the "themer" knowing how the theme system works.</h3>
          </section>




          <section>
            <h2>How many people know how this works?</h2>
            <img src="assets/theme-system.png" alt="The flow chart of Drupal's terrible theme system flow" />
            <p><small><a href="http://john.albin.net/drupal/arrays-of-doom">Diagram from John Albin Wilkins</a></small></p>
          </section>

          <section>
            <h1>In chasing <em>easy</em><br>
            We lost <em>simple</em>
            </h1>
          </section>          
 </section>

<!-- In chasing easy, we completely lost simple. And as simple got lost, so did easy. -->

<!-- use theme(node) vs theme(item_list) example. -->

<!-- @todo, work in the simple vs easy dynamic -->


        <section id="present1">
          
          <section>
            <h1>The (future-ish) PRESENT</h1>
            <h2>Make the markup match</h2>
          </section>


          <section>
            <h1>Back to the Givens!</h1>
          </section>

          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>The client wants a RESPONSIVE site</h2>
            <h3>The designers must do some work in CSS</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>

<!-- @todo, Michigan example -->


          <section>
            <h2>Responsive wireframes</h2>
            <img src="assets/UofM-Health-RWD.png" alt="University of Michigan Health System site shown on different devices" />
            <p><small><a href="http://palantir.net/experience/university-michigan-health-system">University of Michigan Health System</a></small></p>
            <aside class="notes">
              <p>
              Design team knew they needed to be in the browser<br>
              Focused on major elements<br>
              --reflowing of elements, nav, body<br>
              <b>FEDs rewrite a lot of it</b>
              </p>
            </aside>
          </section>


          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>The designs are in HTML/CSS</h2>
            <h3>We no longer want Drupal's HTML and CSS. We already have some.</h3>
            <aside class="notes"><p>This given starts flips the mindset of the past. When the canonical designs are HTML/CSS, why would you rewrite the code for Drupal?</p> 
            </aside>
          </section>


          <section>
            <h2>Responsive prototypes</h2>
            <img src="assets/PRI_6.jpg" alt="The Public Radio International site shown on different devices" />
            <p><small><a href="http://palantir.net/experience/public-radio-international">Public Radio International</a></small></p>
            <aside class="notes">
              <p>
            Prototypes more robust<br>
            CSS/Markup from the designers is getting better and better<br>
              </p>
            </aside>
          </section>


          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>Our designers think in <br><em>Design Components</em></h2>
            <h3>Those are a consistent starting point to dev/designer conversations</h3>
            <aside class="notes">
              <p>
Why are we still forking our CSS?
</p>
            </aside>

          </section>

          <section>
            <h1>GIVEN <small>(NOW)</small></h1>
            <h2>Everybody wants a "living" style guide</h2>
            <h3>Our job is now to make Drupal match the Design Components</h3>
            <aside class="notes">
              <p></p>
            </aside>
          </section>

          <section>
            <h2>For a style guide to be <br>"living" the CSS and the markup need to be the same in both places</h2>
            <aside class="notes">
              <p></p>
            </aside>
          </section>

          <section>
            <h1>What are we doing (now)?</h1>
          </section>

          <section>
            <h2>We are making the <br>markup match</h2>
            <h3>The CSS "Just Works"</h3>
          </section>


          <section>
          <h2>Why didn't we <br>do that before?</h2>
            <blockquote>The "strip-it" method gives you incredible control over the theme and the output of the site, which is an awesome thing.  However, it doesn't give you the ability to <strong>let a client add a new view</strong> to the site and have it follow the theme/style guide</blockquote>
            <p><small><a href="http://www.palantir.net/blog/drupal-theming-getting-your-hands-dirty-and-building-house-0">Colleen Carroll in 2009</a></small></p>
          </section>

          <section>
            <h1>Now we have the technology</h1>
          </section>


          <section>
            <h2>Your static prototype has this Design Component</h2>
            <img src="assets/illustrated-list-item.png" alt="Screen shot of an illustrated list item Design Component" />
          </section>





          <section>
            <h2>How do you make Drupal print that?</h2>

<pre><code>
<article class="illustrated-list-item">

  <figure class="illustrated-list-item__image">
    <a href="#">
      <img src="/assets/imgs/example.jpg">
    </a>
  </figure>

  <p class="illustrated-list-item__metadata">
    <span class="month">June</span> 6, 2014
  </p>

  <h1 class="illustrated-list-item__title">
    <a href="#">
      22nd Annual Golf Tournament
    </a>
  </h1>

</article>

</code></pre>
            <aside class="notes">
            </aside>
          </section>







          <section>
            <h2>What were those contrib tools again?</h2>
            <ul>
              <li class="fragment">Panels, Page Manager, Panels Everywhere, Mini Panels, Panelizer</li>
              <li class="fragment">Display Suite layouts</li>
              <li class="fragment">Views Display plugins</li>
              <li class="fragment">Suppress unwanted divs with Fences</li>
              <li class="fragment">Add View Modes</li>
            </ul>
          </section>



          <section>
            <h2>Panels itself is a UI on top of theme()</h2>
            <h3>Map Design Components <br>to Layout Plugins</h3>
            

<pre><code class="php" data-trim>
<article class="illustrated-list-item">

  <figure class="illustrated-list-item__image">
    < ?php print $content['image']; ?>
  </figure>
  
  <div class="illustrated-list-item__metadata">
    < ?php print $content['date']; ?>
  </div>
  
  <h1 class="illustrated-list-item__title">
    < ?php print $content['title']; ?>
  </h1>

</article>
</code></pre>
          </section>




          <section>
            <h2>In Panels you set the required data sources</h2>
            <img src="assets/mini-panel-context.png" alt="Mini Panels UI" />
          </section>

          <section>
            <h2>Pick your Design Component destination (layout plugin)</h2>
            <img src="assets/mini-panel-layout.png" alt="Mini Panels UI" />
          </section>

          <section>
            <h2>Instructions for transforming the data into printable variables</h2>
            <img src="assets/mini-panel-content.png" alt="Mini Panels UI" />
          </section>

          <section>
            <h2>Separate raw data, from the Design Components, from the preparation of variables</h2>
          </section>




          <section>
            <h2>Use layout plugins <br>at multiple layers of Drupal</h2>
            <ul>
              <li class="fragment">Panels Everywhere for the <code>page.tpl.php</code> level</li>
              <li class="fragment">Page Manager for the <code>hook_menu()</code> level</li>
              <li class="fragment">Panelizer for View Modes</li>
              <li class="fragment">Mini Panels for Block level</li>
            </ul>
          </section>











          <section>
            <h2>In the future-ish present we <em>try</em> to BE the design by making the markup match.</h2>
            
            <aside class="notes"><p>The CSS can just be the same in both places<br>
            We're still TRYING on the markup.</p> 
            </aside>
          </section>

    
          <section>
            <img src="assets/doordonot.jpg" alt="Do or Do Not. There Is No Try" />
          </section>        

        </section>







<!-- @todo, reference http://www.palantir.net/blog/platonic-content -->


        <section id="future">

          <section>
            <h1>The FUTURE</h1>
            <h2>Clear Decoupling</h2>
          </section>








          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h3>
              Headless, Headless, Headless, Headless, 
              Headless, Headless, Headless, Headless, 
              Headless, Headless, Headless, Headless.              
            </h3>
              <p>In the session description I promised a dozen references to Headless Drupal</p> 
            <aside class="notes"><p></p> 
            </aside>
          </section>


          <section>
            <blockquote>Headless software is software capable of working on a device <strong>without a graphical user interface</strong>.</blockquote>
            <p><small><a href="http://en.wikipedia.org/wiki/Headless_software">Wikipedia</a></small></p>
          </section>


          <section>
            <h1>So... Drush?</h1>
          </section>


          <section>
            <h2><small>More like</small><br>
            Ember<br>
            Angular<br>
            Backbone<br>
            Web Components<br>
            </h2>
          </section>




        <section>
            <h2>If you want to make a Headless Horseman,<br> you need to know where the neck is.</h2>
            <table>
            
            
            <tr>


         <td>Before <code>theme()</code>?

</td>

         <td>After <code>theme()</code>?

</td>
</tr>
            
            
            
            <tr>



              <td>
                        <pre><code class="php" data-trim>
$vars['title'] = 'Grocery List';
$vars['items'] = array(
  'Fruit',
  'Bread',
  'Cheese',
  'Meat',
);
print theme('item_list', $vars);
</code></pre>
</td>

<td>
            <pre><code class="php" data-trim>
$node = node_load(123);
theme('node', $node);</code></pre>
</td>
</tr></table>
            <aside class="notes">
            <p>An item list is a Design Component.<br>
            A node is not.<br>
            At least not specific enough for most any public facing project.
            </p> 
            </aside>
          </section>





          

          <section>
          <h2>Horseman is calling<br> Drupal out</h2>
            <blockquote>
In Drupal today, we have a tendency to <strong>conflate our data and our controllers</strong> which makes it an absolute mess for front-end developers to reliably get the output they'd like without at least intermediate PHP skills and a full PHP debugger.
</blockquote>
            <p><small><a href="https://github.com/davidhwang/horseman/blob/master/dogfooding.md">And on GitHub</a></small></p>
          </section>



          <section>
          <h2>What do we do about it?</h2>
            <blockquote>
 In order to resolve this, and to enforce the best practices of <strong>separation of presentation and content</strong> in modules that's needed for a headless state, anything that gets printed to a page is required to have a controller that is separate from the data model. 
</blockquote>
            <p><small><a href="https://github.com/davidhwang/horseman/blob/master/dogfooding.md">Horseman on GitHub</a></small></p>
          </section>





<!--

@todo, add the horseman action items.

-->





          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h2>Clients will see the value in decoupling</h2>
            <h3>And will stay on on the same Drupal versions while re-doing the front end</h3>
            <aside class="notes"><p>For years we've been telling clients to skip major versions of Drupal. We've said "If you're on Drupal 5, wait for 7. If you're on Drupal 6, wait for Drupal 8." That doesn't work so well if you launch a D6 site in 2009 and need a responsive site yesterday. So we've done a lot of Drupal 6 to Drupal 7 upgrades for responsive. The admin-side benefits are nice, but secondary motivations for most many clients. What if we could stay on the same Drupal version?</p> 
            </aside>
          </section>

          <section>
            <img src="assets/toddross-coupled" alt="Timeline of decoupled sites" />
            <p><small><a href="https://twitter.com/ToddRoss/status/495245469543849984">Todd Ross Nienkerk: "Future of the CMS"</a></small></p>
            <aside class="notes">
              <p>This diagram shows what we do now and it is painful.</p>
            </aside>
          </section>

          <section>
            <img src="assets/toddross-decoupled" alt="Timeline of decoupled sites" />
            <p><small><a href="https://twitter.com/ToddRoss/status/495245469543849984">Todd Ross Nienkerk: "Future of the CMS"</a></small></p>
            <aside class="notes">
              <p>To make a decoupled approach work, you need a clear definition of which things happen on which sides.</p>
            </aside>
          </section>



          <section>
            <h1>GIVEN <small>(now/future)</small></h1>
            <h3>Front-end web practices are changing faster than those server-side</h3>
            <h3>So we should look for common patterns</h3>
            <aside class="notes"><p></p> 
            </aside>
          </section>


          <section>
            <h2>Patterns in modern Front-end that <br>Drupal will have to<br> better accommodate</h2>
            <ul>
              <li class="fragment">Encapsulation, Encapsulation, Encapsulation</li>
              <li class="fragment">Data Binding</li>
              <li class="fragment">Interfaces</li>
              <li class="fragment">Cleaner Extension</li>
           </ul>
            <aside class="notes"><p>Angular, Ember, Polymer and countless others expect to be given a model to which they can bind.</p> 
            </aside>
         </section>


          <section>
            <h1>What are we doing?</h1>
          </section>


          <section>
            <h2>
              Pulling <br>useable variables <br>into independent<br> Design Components
            </h2>
          </section>

          <section>
            <h2>You are moving to <br>the future when...</h2>
            <ul>
              <li class="fragment">You can draw clear lines between data and presentation</li>
              <li class="fragment">Design Components are defined in one place</li>
              <li class="fragment">You name your Design Components independent of Drupal</li>
              <li class="fragment">Your templates and functions are named after Design Components, not Drupal data structures</li>
              <li class="fragment">You can make changes to front end code used by Drupal (CSS, templates, JS) outside of your Drupal
                <ul>
                 <li class="fragment">With CSS from a static prototype</li>
                 <li class="fragment">With encapsulated JS</li>
                 <li class="fragment">With reusable templates</li>
               </ul>
             </li>
             <li class="fragment">You can imagine a Front End Developer on a Drupal project not knowing PHP</li>
           </ul>
         </section>


          <section>
            <h2>How?</h2>
            <ul>
              <li class="fragment">Front End Developers need to work with Designers on the same things at the same time</li>
              <li class="fragment">Pair Programming / Pair Designing</li>
              <li class="fragment">Developers need to push for the next X</li>
              <li class="fragment">Developers need to ask themselves "am I making X look like Y or am I making X be Y?"</li>
              <li class="fragment">Designers can state the data required by each Design Component</li>
           </ul>
            <aside class="notes">
            <p></p> 
            </aside>
         </section>




       </section>


       <section id="final">


        <section>
          <h2>The PAST</h2>
          <h3>Make<br> default markup <br>LOOK LIKE<br> the designs</h3>
        </section>

        <section>
          <h2>The PRESENT</h2>
          <h3>Match the markup <br>and the CSS just works</h3>
        </section>


        <section>
          <h2>FUTURE</h2>
          <h3>Make the real site's <br>Design Components<br> BE<br> the canonical<br> Design Components</h3>
        </section>


          <section>
            <h2>Session plugs</h2>
            <ul>
              <li class="fragment"><a href="https://events.drupal.org/losangeles2015/sessions/drupal-8s-render-pipeline">Drupal 8's Render Pipeline</a></li>
              <li class="fragment"><a href="https://events.drupal.org/losangeles2015/sessions/drupal-8-theme-system-hooktheme-twig-template">Drupal 8 Theme System: hook_theme() to Twig template</a></li>

              
              <li class="fragment"><a href="https://events.drupal.org/losangeles2015/sessions/style-guide-driven-development-all-hail-robot-overlords">Wednesday: Style Guide Driven Development</a></li>
              <li class="fragment">Thursday Core Conversations: <a href="https://events.drupal.org/losangeles2015/sessions/what-panels-can-teach-us-about-web-components">What Panels can teach us about Web Components</a> and <a href="https://events.drupal.org/losangeles2015/sessions/drupal-9-components-library-next-theme-system">Drupal 9 Components Library: The next theme system</a></li>
           </ul>
         </section>


        <section>
          <div>
            <h2>Steve Persch</h2>
            <p><a href="http://www.palantir.net/">Palantir.net</a></p>
            <q>Let's make something good together</q>
            <p>Keep tabs on our work at <a href="http://twitter.com/Palantir">@Palantir</a></p>
          </div>
        </section>
      </section>


    </div>
  </div>

    <footer class="palantir-logo">
      <a href="http://www.palantir.net/"><img src="palantir/palantirnet-logo-4c-reversed.svg" alt="Palantir.net logo" height="37" /></a>
    </footer>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
        ]
      });

    </script>
  </body>
</html>



<!-- @todo Define web component -->

<!--
<div class="node node-article node-promoted node-teaser contextual-links-region clearfix" id="node-1">

        <h2><a href="/node/1">Building Bridges Between Communities</a></h2>
      <div class="meta submitted">
            Submitted by <a class="username" title="View user profile." href="/user/2">Colleen Carroll</a> on Wed, 11/05/2014 - 17:24    </div>
  
  <div class="content clearfix">
    <div class="field field-name-field-image field-type-image field-label-hidden"><div class="field-items"><div class="field-item even"><a href="/node/1"><img width="220" height="156" alt="" src="sites/default/files/styles/medium/public/field/image/illo-ColleenIsland_20140925_02.png?itok=VQXS87jd"></a></div></div></div><div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even"><p>Larry Garfield’s <a href="http://www.palantir.net/blog/d8ftw-your-next-drupal-hire-isnt-drupal-hire">recent post</a> talks about the need for Drupal developers and employers to "get off the island" and reach outside the existing Drupal community for opportunities and talent.</p>
</div></div></div>  </div>

      <div class="link-wrapper">
      <ul class="links inline"><li class="node-readmore first last"><a title="Building Bridges Between Communities" rel="tag" href="/node/1">Read more<span class="element-invisible"> about Building Bridges Between Communities</span></a></li>
</ul>    </div>
  
  
</div>

-->
